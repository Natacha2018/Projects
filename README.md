# Unsupervised Machine Learning: Dimensionality Reduction and Clustering of Galaxy Morphology
This code explores the MaNGA Pipe3D value added catalog: Spatially resolved and integrated properties of galaxies for DR17, which can be found online here: https://www.sdss4.org/dr17/manga/manga-data/manga-pipe3d-value-added-catalog/#Accesstothedata. In doing so, I wanted to look at the morphologies of galaxies, and see whether or not these could be classified through unsupervised learning using photometric data only. I hope to find some pattern in the data. Although photometric data alone might not be enough to completely classify galaxies through unsupervised learning, perhaps some patterns can still be explored. To prepare the data, I made sure to check for NaN values and remove those that did have any, as well as check for duplicates. I then also selected only the photometric features that seemed relevant for the question at hand. This included color descriptions, dynamics, and reddening. A correlation matrix was then plotted as well as a scatter matrix to look into the data cleaning and correlation between the features. Since a dimensionality reduction algorithm was going to be used, I did not remove more features even if they had high correlations between each other. There were also some outliers seen in the scatter matrix, however if trying to remove these, the DR algorithms and clustering algorithms performed worse, so this was also excluded. 

For the dimentionality reduction (DR), I used the PCA, t-SNE, and UMAP algorithms. After performing DR with these three algorthims, we see different patterns in the data. Unfortunately the 3D visualization of the t-SNE was too computationaly heavy, so I plotted these in 2D. For the PCA, we see some structuring, but not a lot. In the PCA 1 and PCA2 dimension, a cluster forms in the top left, and a smaller one on the bottom right hand side. When trying to tune the hyper-parameters of the PCA, not much changed. For the t-SNE, different hyper-parameters were used such as the perplexity or the learning rate. The latter did not effect the visualization as much, however the perplexity did. Two graphs with perplexities 50 and 20 were plotted. As the perplexity increases, clearer shapes tend to form. For lower perplexity, we see more substructures forming within the data. For the UMAP, a very complex structure forms. There is clustering in the top middle and sides of the first and second component dimensional space. 

We then used the KMeans and DBSCAN clustering algorithms. The KMeans clustering chooses a cluster center and then associates each data point to the nearest centroid. It then calculates a new centroid from the mean of all of these data points and does this until there is small significant change in centroids. This is a simple algorithm, however you need to input the number of clusters yourself. Here I chose 10 as that is the number of galaxy types the original dataset finds. When using the PCA data, we do not see any clear sub-groups, however when using the t-SNE data, there does seem to be some subgroups appearing. For UMAP it seems very complex, and perhaps not all 10 sub-groups are clearly seen. 

The DBSCAN clustering defines core points with a certain minimum threshold of neighboring points within a specific radius. It then looks at the distance of points close to these core points. Those outside are then noise points. With this method, the same structures appeared. However, when comparing to the testing label, no clusters were detected. This is most likely due to the homogenity of the data, meaning that most of the data was equidistant and reflected as one whole group. 

The DBSCAN algorithm shows in fact a slightly higher homogeneity to the KMeans clustering, but lower completeness and silhouette scores. 

I used the 'best_type_n' feature as a testing label which represents the different morphological galaxy types. We see that the clustering algorithms used do not correspond well to the true labels. This essentially shows the difficulty in creating unsupervised models. More work and time should go into checkin more of the hyperparameters and possibilities of all of the different clustering and DR methods, as well as checking for additional data. However, due to a lack of time and computer power, this is all that this model can do for now.  

Acknowledgements: This project makes use of the MaNGA-Pipe3D dataproducts. We thank the IA-UNAM MaNGA team for creating this catalogue, and the Conacyt Project CB-285080 for supporting them.

Lacerda et al. (2022), and SÃ¡nchez et al. (2022) (paper presenting the DR17 VAC described on this webpage).
